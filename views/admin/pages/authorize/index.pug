extend ../../layouts/default
include ../../mixins/alert

block main

  +alertDanger(5000)
  +alertSuccess(5000)

  h1 Authorization
  
  if records 
    div(data-records=records)

    div(class="text-right")
      button(
        type="submit"
        class="btn btn-primary mb-3"
        button-submit 
      ) Update
    table(class="table table-hover table-lg" table-permission)
      thead 
        tr  
          th Feature
          each item in records 
            th(class="text-center") #{item.title}
          
      tbody
        tr(data-name="id" class="d-none")
          td
          each item in records 
            td(class="text-center")
              input(type="text" value=item.id) 
        tr
          td(colspan="4")
            b Product Category
        tr(data-name="products-category_view")
          td View
          each item in records
            td(class="text-center")
              input(type="checkbox")       
        tr(data-name="products-category_create")
          td Create
          each item in records
            td(class="text-center")
              input(type="checkbox")
        tr(data-name="products-category_edit")
          td Edit
          each item in records
            td(class="text-center")
              input(type="checkbox")
        tr(data-name="products-category_delete")
          td Delete
          each item in records
            td(class="text-center")
              input(type="checkbox")


      tbody
        tr(data-name="id" class="d-none")
          td
          each item in records 
            td(class="text-center")
              input(type="text" value=item.id) 
        tr
          td(colspan="4")
            b Product
        tr(data-name="products-view")
          td View
          each item in records
            td(class="text-center")
              input(type="checkbox")       
        tr(data-name="products-create")
          td Create
          each item in records
            td(class="text-center")
              input(type="checkbox")
        tr(data-name="products-edit")
          td Edit
          each item in records
            td(class="text-center")
              input(type="checkbox")
        tr(data-name="products-delete")
          td Delete
          each item in records
            td(class="text-center")
              input(type="checkbox")

      tbody
        tr(data-name="id" class="d-none")
          td
          each item in records 
            td(class="text-center")
              input(type="text" value=item.id) 
        tr
          td(colspan="4")
            b Permissions Group
        tr(data-name="permissions-view")
          td View
          each item in records
            td(class="text-center")
              input(type="checkbox")       
        tr(data-name="permissions-create")
          td Create
          each item in records
            td(class="text-center")
              input(type="checkbox")
        tr(data-name="permissions-edit")
          td Edit
          each item in records
            td(class="text-center")
              input(type="checkbox")
        tr(data-name="permissions-delete")
          td Delete
          each item in records
            td(class="text-center")
              input(type="checkbox")
        tr(data-name="permissions-authorize")
          td Authorize
          each item in records
            td(class="text-center")
              input(type="checkbox")
    


    form(
      action=`${prefixAdmin}/authorize/change?_method=PATCH`
      method="POST"
      id="form-change-permissions"
    )
      div(class="form-group")
        input(
          type="text"
          class="form-control d-none"
          name="permissions"
        )

  script(src="/admin/js/role.js")
  